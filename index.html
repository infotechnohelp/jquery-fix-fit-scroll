<style>
    html, body {
        box-sizing: border-box;
        margin: 0;
    }

    .fix-fit-scroll {
        position: fixed;
        bottom: 25px;
    }

    .fix-fit-scroll {
        background-color: green;
        width: 100%;
    }

    .fix-fit-scroll > div {
        background-color: red;
    }

    .scope > button {
        display: block;
        margin: 25px;
    }

    .second-scope {
        display: none;
    }

    #output {
        position: fixed;
        bottom: 0;
    }
</style>

<div class="fix-fit-scroll">
    <div class="second-scope scope"></div>

    <div>
        <button id="second-scope-open"> Open</button>

        <button id="second-scope-close"> Close</button>
    </div>

    <div class="first-scope scope"></div>

</div>

<div id="output"></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="node_modules/clay.js/dist/clay.js"></script>

<script>

    (function ($) {

        $.fn.fitFixScroll = function (options) {

            var defaultOptions = {
                scrollBottom: true
            };

            var scrollBottom = options.scrollBottom;

            if(options.scrollBottom === undefined){
                scrollBottom = defaultOptions.scrollBottom;
            }

            var _this = this;

            return this.each(function () {

                $(this).html('<div>' + $(this).html() + '</div>');

                new Clay(this, {resize: false}).on('resize', function (size) {

                    var wrapperFitsWindow = ($(_this).height() + parseInt($(_this).css('bottom'))) <= $(window).height();

                    if (!wrapperFitsWindow) {
                        $(_this).css({
                            height: $(window).height() - parseInt($(_this).css('bottom')),
                            'overflow-y': 'scroll'
                        });

                        if (scrollBottom) {
                            $(_this).scrollTop($(_this).children('div').height());
                        }
                    }
                });

                new Clay($(this).children('div')[0], {resize: false}).on('resize', function (size) {

                    var contentFitsWrapper = $(_this).children('div').height() <= $(_this).height();

                    if (contentFitsWrapper) {
                        $(_this).css({
                            height: 'auto',
                            'overflow-y': 'hidden'
                        });
                    }
                });

                $(window).resize(function () {
                    var wrapperFitsWindow = ($(_this).height() + parseInt($(_this).css('bottom'))) <= $(window).height();

                    if (!wrapperFitsWindow) {
                        $(_this).css({
                            height: $(window).height() - parseInt($(_this).css('bottom')),
                            'overflow-y': 'scroll'
                        });

                        if (scrollBottom) {
                            $(_this).scrollTop($(_this).children('div').height());
                        }
                    } else {
                        $(_this).css({
                            height: 'auto',
                            'overflow-y': 'hidden'
                        });
                    }
                });
            });
        };

    }(jQuery));


    $('.fix-fit-scroll').fitFixScroll({/*scrollBottom: false*/});


    $(function () {
        for (var i = 1; i <= 5; i++) {
            $('.first-scope').append('<button>Button' + i + '</button>');
        }

        for (var i = 6; i < 25; i++) {
            $('.second-scope').append('<button>Button' + i + '</button>');
        }

        $('#second-scope-open').click(function () {
            $('.second-scope').show();
        });

        $('#second-scope-close').click(function () {
            $('.second-scope').hide();
        });
    });
</script>